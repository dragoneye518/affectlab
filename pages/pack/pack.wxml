<view class="min-h-screen bg-black text-white font-sans pb-20 relative">
  <view class="fixed inset-0 pointer-events-none z-0 opacity-10 bg-stardust"></view>

  <view class="fixed top-0 left-0 right-0 z-50 bg-dark-900-90 backdrop-blur border-b border-white-10" style="padding-top: {{statusBarHeight}}px;">
    <view class="flex items-center px-4 h-full" style="height: {{navBarHeight}}px; padding-right: {{menuButtonWidth + 8}}px;">
      <view class="flex items-center gap-2">
        <image src="https://api.iconify.design/lucide:backpack.svg?color=%23ff00ff" class="w-5 h-5" />
        <text class="font-black italic tracking-widest text-white">INVENTORY</text>
      </view>
      <view class="ml-auto flex items-center gap-2">
        <view class="flex items-center gap-1 px-2 py-0.5 rounded-full border bg-white-5 border-white-10">
          <image src="https://api.iconify.design/lucide:candy.svg?color=%23ffff00" class="w-3 h-3" />
          <text class="font-mono font-bold text-xs min-w-8 text-center text-neon-yellow">{{candyCount}}</text>
        </view>
      </view>
    </view>
  </view>

  <view class="px-4 max-w-md mx-auto relative z-10" style="padding-top: {{contentPaddingTop}}px;">
    <view class="animate-fade-in">
      <view class="flex items-center justify-between mb-6">
        <view class="flex items-center gap-2">
          <text class="text-xs text-gray-500 tracking-widest uppercase font-bold">生成记录</text>
        </view>
        <text class="text-sm font-normal text-gray-500">{{history.length}}</text>
      </view>

      <block wx:if="{{history.length === 0}}">
        <view class="text-center py-20 opacity-50 space-y-4 flex flex-col items-center">
          <image src="https://api.iconify.design/lucide:backpack.svg?color=gray" class="w-12 h-12 opacity-20" />
          <text>Empty Inventory</text>
        </view>
      </block>

      <block wx:else>
        <view class="grid grid-cols-2 gap-4">
          <block wx:for="{{history}}" wx:key="id">
            <view bindtap="onHistorySelect" data-item="{{item}}" class="aspect-3-4 relative rounded-xl overflow-hidden border border-white-10 active-scale-95 transition-transform">
              <image src="{{item.imageUrl}}" class="w-full h-full object-cover" mode="aspectFill" />
              <view class="absolute inset-0 bg-gradient-t-black flex flex-col justify-end p-3">
                <text class="text-sm font-bold text-white line-clamp-1">{{item.displayText}}</text>
                <text class="text-xs-mini text-gray-400">{{item.dateStr}}</text>
                <view class="absolute top-2 right-2 px-2 py-0-5 text-xs-mini font-black italic border rounded bg-black-50 text-white">{{item.rarity}}</view>
              </view>
            </view>
          </block>
        </view>
      </block>
    </view>
  </view>

</view>
